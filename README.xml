# ğŸ“ File Upload Service â€” Spring WebFlux Project

        Projekt realizuje upload plikÃ³w poprzez Spring WebFlux z zachowaniem reaktywnoÅ›ci oraz testami jednostkowymi i integracyjnymi

        ## ğŸš€ Opis projektu

        Aplikacja umoÅ¼liwia:

        - ğŸ“¤ Upload jednego lub wielu plikÃ³w poprzez REST API (`/files`)
        - ğŸ—„ï¸ Zapisanie metadanych pliku (nazwa, rozmiar, suma kontrolna) do bazy danych (przykÅ‚adowo R2DBC/PostgreSQL)
        - ğŸ§ª Testowanie dziaÅ‚ania za pomocÄ… testÃ³w jednostkowych (JUnit5 + Mockito) oraz integracyjnych (WebTestClient)
        - ğŸ”¥ ObsÅ‚ugÄ™ duÅ¼ych plikÃ³w (nawet do 1 GB, bez obciÄ…Å¼ania pamiÄ™ci RAM)

        Projekt wykorzystuje:

        - **Spring Boot 3.4+**
        - **Spring WebFlux**
        - **R2DBC** (reaktywne operacje na bazie danych)
        - **JUnit 5**, **Mockito**, **AssertJ**
        - **Reactor Core**

        ---

        ## ğŸ› ï¸ Technologie

        - Java 17+
        - Spring Boot
        - Spring WebFlux
        - Spring Data R2DBC
        - PostgreSQL (lub inna baza danych)
        - Maven
        - Reactor (Flux, Mono)
        - JUnit 5 + Mockito

        ---

        ## ğŸ“„ Struktura projektu

        src/
        â”œâ”€â”€ main/
        â”‚   â”œâ”€â”€ java/com/example/asd/
        â”‚   â”‚   â”œâ”€â”€ controller/         # REST API
        â”‚   â”‚   â”œâ”€â”€ dto/                # DTO zwracane na REST
        â”‚   â”‚   â”œâ”€â”€ model/              # Encje (FileMetadata)
        â”‚   â”‚   â”œâ”€â”€ repository/         # Repozytorium R2DBC
        â”‚   â”‚   â””â”€â”€ service/            # Serwis do obsÅ‚ugi plikÃ³w
        â”‚   â””â”€â”€ resources/              # Konfiguracja i pliki properties
        â”œâ”€â”€ test/
        â”‚   â”œâ”€â”€ java/com/example/asd/
        â”‚   â”‚   â”œâ”€â”€ integration/        # Testy integracyjne (WebTestClient)
        â”‚   â”‚   â”œâ”€â”€ unit/               # Testy jednostkowe (Service layer)
        â”‚   â”‚   â””â”€â”€ util/               # NarzÄ™dzia np. generowanie plikÃ³w
        â”‚   â””â”€â”€ resources/              # Pliki testowe (testfile.txt itp.)

        ## ğŸ“¬ Endpointy API

        ### ğŸ“¥ POST `/files`
        **Opis:** WysyÅ‚a jeden lub wiele plikÃ³w do zapisania.

        - **Content-Type:** `multipart/form-data`
        - **Parametr:** `files` (wiele plikÃ³w)
        - **OdpowiedÅº:** JSON z listÄ… przesÅ‚anych plikÃ³w.

        PrzykÅ‚ad odpowiedzi:
        ```json
        [
        {
        "fileName": "testfile.txt",
        "size": 12345,
        "checksum": "a5dcb4e22f2f4f6d..."
        }
        ]

        ## ğŸ› ï¸ Jak zbudowaÄ‡ projekt

        1. Skonfiguruj bazÄ™ danych (np. PostgreSQL).
        2. Ustaw dane poÅ‚Ä…czenia w pliku `src/main/resources/application.yml`:

        ```yaml
        spring:
        r2dbc:
        url: r2dbc:postgresql://localhost:5432/your_database
        username: your_username
        password: your_password
        sql:
        init:
        mode: always

        server:
        port: 8080
        ```

        3. Zbuduj projekt poleceniem:

        ```bash
        ./mvnw clean install
        ```

        4. Uruchom aplikacjÄ™:

        ```bash
        ./mvnw spring-boot:run
        ```

        ---

        ## ğŸ§ª Jak uruchomiÄ‡ testy

        Uruchom wszystkie testy komendÄ…:

        ```bash
        ./mvnw test
        ```

        Testy obejmujÄ…:

        - Testy jednostkowe (`unit`) â€” testy warstwy serwisowej
        - Testy integracyjne (`integration`) â€” testy REST API

        ---

        ## ğŸ“¬ PrzykÅ‚adowe wywoÅ‚ania API

        ### ğŸ“¥ POST `/files`
        **Opis:** WysyÅ‚a jeden lub wiele plikÃ³w do zapisania.

        - **Content-Type:** `multipart/form-data`
        - **Parametr:** `files` (wiele plikÃ³w)
        - **OdpowiedÅº:** JSON z listÄ… przesÅ‚anych plikÃ³w.

        PrzykÅ‚ad odpowiedzi:
        ```json
        [
        {
        "fileName": "testfile.txt",
        "size": 12345,
        "checksum": "a5dcb4e22f2f4f6d..."
        }
        ]
        ```

        PrzykÅ‚ad wywoÅ‚ania przez `curl`:

        WysÅ‚anie jednego pliku:

        ```bash
        curl -v -F "files=@src/test/resources/testfile.txt" http://localhost:8080/files
        ```

        WysÅ‚anie wielu plikÃ³w:

        ```bash
        curl -v -F "files=@src/test/resources/testfile1.txt" -F "files=@src/test/resources/testfile2.txt" http://localhost:8080/files
        ```

        ---


        ## âš™ï¸ Wymagania systemowe

        - Java 17+
        - Maven 3.6+
        - PostgreSQL (lub inna kompatybilna baza)
        - IntelliJ IDEA lub inne IDE
        - Zalecane min. 4 GB RAM dla obsÅ‚ugi plikÃ³w powyÅ¼ej 500 MB

        ---


        ## ğŸ“š Autor

        Projekt stworzony przez **Åukasz Stec**.
